{
  "hash": "7be89cbf8b3bdff10361b77ea5eb2d81",
  "result": {
    "markdown": "---\ntitle: \"\"\n---\n\n\n\n## Operadores básicos\n\n#### Operador de atribuição\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-1_7403e64618750cf81e19b59b2efa16c5'}\n\n```{.r .cell-code}\n# <- \n# =\n\na <- 1\nb = 1\na\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1\n```\n:::\n:::\n\n\n#### Vetores numéricos - individuais\n\nExemplos de vetores numéricos - Inteiro e decimal\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-2_23b056ae1eceec4c1065135b1aa6d965'}\n\n```{.r .cell-code}\n# Númerico inteiro\nserie1 <- c(1:4)\n\n# Númerico decimal \nserie2 <- c(1.5,2.5,3.5,4.5)\n\n# Caractere\nserie3 <- c(\"um\", \"dois\", \"tres\", \"quatro\")\n\n# Booleano (verdadeiro ou falso)\nserie4 <- c(TRUE, FALSE, FALSE, FALSE)\n\n#serie4: binario \n#Vetores independentes\n```\n:::\n\n\n#### Vetor de caractere - individuais\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-3_a0021aa518209563504043dc042f29f6'}\n\n```{.r .cell-code}\na <- \"Isabela - qualquer texto com mais de uma palavra\"\na <- c(\"um\", \"dois\", \"tres\")\n```\n:::\n\n\n## Criando data frame\n\nNesta etapa iremos criar um dataframe (base de dados) a partir de variaveis individuais que foram criadas previamente. A principal caracteristica de um data frame é possuir linha e colunas.\n\nCria uma tabela com variaveis (pode ser diferentes - numerica inteira, decimal, caractere.. ) de mesmo tamanho para visualizar meus dados.\n\nObs: cars- já é um data frame, que tem o \"speed\" e o \"dist\" como variavel. Se quiser criar um data frame a partir de outro data frame so precisa do sinal de atribuição (<-)\n\n\n\n## Exporando os dados:\n\n### Importa dados\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-4_c119cfa539660ae9cdac326e21a5cf7b'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\ncr <- read_csv(\"https://raw.githubusercontent.com/emdelponte/paper-coffee-rust-Ethiopia/master/data/survey_clean.csv\")\n```\n:::\n\n\n### Aprender a exportação:\n\nPacote que permite fazer essa exportação é **writexl**\n\n-   A partir do data frame vamos exportar para um formato `.xlsx` ou `.csv`\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-5_163a373bf48d18fde0acc41dfa8ef9cd'}\n\n```{.r .cell-code}\nlibrary(writexl)\n\nwrite_xlsx(cr, \"cr.xlsx\")\n\nwrite_csv(cr, \"cr.csv\")\n```\n:::\n\n\n## Funções de manipulação de dados:\n\nIremos rever algumas funções ou verbos do pacote **dplyr**\n\n### `Select()`\n\n-   Variação de como selecionar as colunas utilizando os criterios.\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-6_4c8814131a182211944ba829d2bfae7d'}\n\n```{.r .cell-code}\n# Estou selecionando apenas algumas colunas, 1 a 10 e a coluna 13.\n\ncr %>% \n  select(1:10, 13)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 405 × 11\n    farm region zone       district      lon   lat altitude cultivar shade    \n   <dbl> <chr>  <chr>      <chr>       <dbl> <dbl>    <dbl> <chr>    <chr>    \n 1     1 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 2     2 SNNPR  Bench Maji Debub Bench  35.4  6.90     1342 Mixture  Mid shade\n 3     3 SNNPR  Bench Maji Debub Bench  35.4  6.90     1434 Mixture  Mid shade\n 4     4 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 5     5 SNNPR  Bench Maji Debub Bench  35.4  6.90     1400 Local    Sun      \n 6     6 SNNPR  Bench Maji Debub Bench  35.4  6.90     1342 Mixture  Mid shade\n 7     7 SNNPR  Bench Maji Debub Bench  35.4  6.90     1432 Mixture  Mid shade\n 8     8 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 9     9 SNNPR  Bench Maji Debub Bench  35.4  6.89     1400 Local    Sun      \n10    10 SNNPR  Bench Maji Debub Bench  35.4  6.88     1342 Mixture  Mid shade\n# ℹ 395 more rows\n# ℹ 2 more variables: cropping_system <chr>, sev2 <dbl>\n```\n:::\n\n```{.r .cell-code}\n# Posso selecionar as coluna por nomes. \n\ncr %>% \n  select(farm, region, inc, sev2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 405 × 4\n    farm region   inc  sev2\n   <dbl> <chr>  <dbl> <dbl>\n 1     1 SNNPR   86.7 55.6 \n 2     2 SNNPR   51.3 17.9 \n 3     3 SNNPR   43.2  8.25\n 4     4 SNNPR   76.7 46.1 \n 5     5 SNNPR   47.2 12.3 \n 6     6 SNNPR   51.3 19.9 \n 7     7 SNNPR   48.3 11.9 \n 8     8 SNNPR   86.7 55.6 \n 9     9 SNNPR   47.2 11.6 \n10    10 SNNPR   51.1 11.4 \n# ℹ 395 more rows\n```\n:::\n\n```{.r .cell-code}\n# Selecionei todas as colunas, menos a \"sev2\".\n\ncr %>% \n  select(-sev2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 405 × 12\n    farm region zone       district      lon   lat altitude cultivar shade    \n   <dbl> <chr>  <chr>      <chr>       <dbl> <dbl>    <dbl> <chr>    <chr>    \n 1     1 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 2     2 SNNPR  Bench Maji Debub Bench  35.4  6.90     1342 Mixture  Mid shade\n 3     3 SNNPR  Bench Maji Debub Bench  35.4  6.90     1434 Mixture  Mid shade\n 4     4 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 5     5 SNNPR  Bench Maji Debub Bench  35.4  6.90     1400 Local    Sun      \n 6     6 SNNPR  Bench Maji Debub Bench  35.4  6.90     1342 Mixture  Mid shade\n 7     7 SNNPR  Bench Maji Debub Bench  35.4  6.90     1432 Mixture  Mid shade\n 8     8 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 9     9 SNNPR  Bench Maji Debub Bench  35.4  6.89     1400 Local    Sun      \n10    10 SNNPR  Bench Maji Debub Bench  35.4  6.88     1342 Mixture  Mid shade\n# ℹ 395 more rows\n# ℹ 3 more variables: cropping_system <chr>, farm_management <chr>, inc <dbl>\n```\n:::\n\n```{.r .cell-code}\n# Para quando tem muitas colunas que quero excluir.\n\ncr %>% \n  select(- c(inc, sev2))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 405 × 11\n    farm region zone       district      lon   lat altitude cultivar shade    \n   <dbl> <chr>  <chr>      <chr>       <dbl> <dbl>    <dbl> <chr>    <chr>    \n 1     1 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 2     2 SNNPR  Bench Maji Debub Bench  35.4  6.90     1342 Mixture  Mid shade\n 3     3 SNNPR  Bench Maji Debub Bench  35.4  6.90     1434 Mixture  Mid shade\n 4     4 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 5     5 SNNPR  Bench Maji Debub Bench  35.4  6.90     1400 Local    Sun      \n 6     6 SNNPR  Bench Maji Debub Bench  35.4  6.90     1342 Mixture  Mid shade\n 7     7 SNNPR  Bench Maji Debub Bench  35.4  6.90     1432 Mixture  Mid shade\n 8     8 SNNPR  Bench Maji Debub Bench  35.4  6.90     1100 Local    Sun      \n 9     9 SNNPR  Bench Maji Debub Bench  35.4  6.89     1400 Local    Sun      \n10    10 SNNPR  Bench Maji Debub Bench  35.4  6.88     1342 Mixture  Mid shade\n# ℹ 395 more rows\n# ℹ 2 more variables: cropping_system <chr>, farm_management <chr>\n```\n:::\n:::\n\n\n### `Filter()`\n\n-   Filtar apenas linhas especificas.\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-7_4762334be5e37ff7f47cf6297fff611d'}\n\n```{.r .cell-code}\ncr %>% \n  select(farm, region, inc) %>% \n  filter(inc > 50)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 70 × 3\n    farm region   inc\n   <dbl> <chr>  <dbl>\n 1     1 SNNPR   86.7\n 2     2 SNNPR   51.3\n 3     4 SNNPR   76.7\n 4     6 SNNPR   51.3\n 5     8 SNNPR   86.7\n 6    10 SNNPR   51.1\n 7    12 SNNPR   76.0\n 8    14 SNNPR   51.3\n 9    16 SNNPR   53.2\n10    20 SNNPR   52.2\n# ℹ 60 more rows\n```\n:::\n\n```{.r .cell-code}\ncr %>% \n  select(farm, region, inc) %>% \n  filter(region == \"SNNPR\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 240 × 3\n    farm region   inc\n   <dbl> <chr>  <dbl>\n 1     1 SNNPR   86.7\n 2     2 SNNPR   51.3\n 3     3 SNNPR   43.2\n 4     4 SNNPR   76.7\n 5     5 SNNPR   47.2\n 6     6 SNNPR   51.3\n 7     7 SNNPR   48.3\n 8     8 SNNPR   86.7\n 9     9 SNNPR   47.2\n10    10 SNNPR   51.1\n# ℹ 230 more rows\n```\n:::\n\n```{.r .cell-code}\ncr %>% \n  select(farm, region, zone, inc) %>% \n  filter(zone == \"Bench Maji\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 45 × 4\n    farm region zone         inc\n   <dbl> <chr>  <chr>      <dbl>\n 1     1 SNNPR  Bench Maji  86.7\n 2     2 SNNPR  Bench Maji  51.3\n 3     3 SNNPR  Bench Maji  43.2\n 4     4 SNNPR  Bench Maji  76.7\n 5     5 SNNPR  Bench Maji  47.2\n 6     6 SNNPR  Bench Maji  51.3\n 7     7 SNNPR  Bench Maji  48.3\n 8     8 SNNPR  Bench Maji  86.7\n 9     9 SNNPR  Bench Maji  47.2\n10    10 SNNPR  Bench Maji  51.1\n# ℹ 35 more rows\n```\n:::\n\n```{.r .cell-code}\n#Estou pegando todas as zonas menos a Bench MAji. **\"!=\"**\ncr %>% \n  select(farm, region, zone, inc) %>% \n  filter(zone != \"Bench Maji\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 360 × 4\n    farm region zone    inc\n   <dbl> <chr>  <chr> <dbl>\n 1    46 SNNPR  Sheka  81.8\n 2    47 SNNPR  Sheka  29.5\n 3    48 SNNPR  Sheka  31.5\n 4    49 SNNPR  Sheka  54.5\n 5    50 SNNPR  Sheka  74.5\n 6    51 SNNPR  Sheka  32.7\n 7    52 SNNPR  Sheka  42.4\n 8    53 SNNPR  Sheka  74.2\n 9    54 SNNPR  Sheka  76.9\n10    55 SNNPR  Sheka  33.2\n# ℹ 350 more rows\n```\n:::\n\n```{.r .cell-code}\n# Criando outro data frame: Criando um subconjunto do \"cr\". \n\ncr2 <- cr %>% \n  select(farm, region, zone, inc) %>% \n  filter(zone != \"Bench Maji\")\n```\n:::\n\n\n##### Outro operador dentro do filtro que permite selecionar mais de uma condição dentro do nome zone. Estou selecionando duas zonas \"Bench Maji\", \"Keffa\".\n\n`%in%`\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-8_c9371f8dbd28c5d80eb9b1ccd2b8f659'}\n\n```{.r .cell-code}\ncr2 <- cr %>% \n  select(farm, region, zone, inc) %>% \n  filter(zone %in% c(\"Bench Maji\", \"Keffa\"))\n\n\n\n\ncr %>% \n  select(farm, region, zone, inc) %>% \n  filter(region == \"SNNPR\") %>% \n  filter(zone != \"Sidama\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 180 × 4\n    farm region zone         inc\n   <dbl> <chr>  <chr>      <dbl>\n 1     1 SNNPR  Bench Maji  86.7\n 2     2 SNNPR  Bench Maji  51.3\n 3     3 SNNPR  Bench Maji  43.2\n 4     4 SNNPR  Bench Maji  76.7\n 5     5 SNNPR  Bench Maji  47.2\n 6     6 SNNPR  Bench Maji  51.3\n 7     7 SNNPR  Bench Maji  48.3\n 8     8 SNNPR  Bench Maji  86.7\n 9     9 SNNPR  Bench Maji  47.2\n10    10 SNNPR  Bench Maji  51.1\n# ℹ 170 more rows\n```\n:::\n:::\n\n\n### Para exportar esse data frame \"cr2\"\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-9_b10353812d099a455a8bf40107a96aa7'}\n\n```{.r .cell-code}\ncr2 <- cr %>% \n  select(farm, region, zone, inc) %>% \n  filter(zone != \"Bench Maji\")\n\n\nwrite_xlsx(cr2, \"cr2.xlsx\")\n```\n:::\n\n\n### Sumarização\n\n`Count()`: Vai contar alguma coisa, para não ter que ficar contando um por um na tabela.\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-10_60135c97349ed11d25d173924880e222'}\n\n```{.r .cell-code}\ncr %>%\n  count(zone)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 9 × 2\n  zone             n\n  <chr>        <int>\n1 Bale            30\n2 Bench Maji      45\n3 Gedio           45\n4 Ilu AbaBora     45\n5 Jimma           45\n6 Keffa           45\n7 Sheka           45\n8 Sidama          60\n9 West Wellega    45\n```\n:::\n\n```{.r .cell-code}\n# Contar quantas zonas tenho em cada distrito. Deixa meu arquivo em formato longo, onde repete os nome da zone. \n\ncr %>%\n  count(zone, district)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 27 × 3\n   zone        district         n\n   <chr>       <chr>        <int>\n 1 Bale        Delo Menna      15\n 2 Bale        Harena Buluk    15\n 3 Bench Maji  Debub Bench     15\n 4 Bench Maji  Guraferda       15\n 5 Bench Maji  Sheko           15\n 6 Gedio       Dila Zuria      15\n 7 Gedio       Wenago          15\n 8 Gedio       Yirgachefe      15\n 9 Ilu AbaBora Ale             15\n10 Ilu AbaBora Matu            15\n# ℹ 17 more rows\n```\n:::\n:::\n\n\n**OBS:** Podemos fazer a mesma coisa do `count()`, utilizando o `tally()`\n\n`group_by`\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-11_a0a4926409470809189e5c44878b2b3b'}\n\n```{.r .cell-code}\ncr %>%\n  group_by(zone, district) %>% \n  tally()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 27 × 3\n# Groups:   zone [9]\n   zone        district         n\n   <chr>       <chr>        <int>\n 1 Bale        Delo Menna      15\n 2 Bale        Harena Buluk    15\n 3 Bench Maji  Debub Bench     15\n 4 Bench Maji  Guraferda       15\n 5 Bench Maji  Sheko           15\n 6 Gedio       Dila Zuria      15\n 7 Gedio       Wenago          15\n 8 Gedio       Yirgachefe      15\n 9 Ilu AbaBora Ale             15\n10 Ilu AbaBora Matu            15\n# ℹ 17 more rows\n```\n:::\n:::\n\n\n### Tabela de contigencia:\n\nPara saber quantas ocorrencias tem, fazendo o cruzamento de region e cultivar, como se fosse uma tabela.\n\nUtiliza o pacote **janitor** que tem a função `tabyl`\n\n-   A função `tabyl` é muito parecido com o `count()`, porém ele tras o nome das zonas, as contagem e o percentual. Isso quando selecionamos apenas uma coluna (zone).\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-12_59c0c6fc77998c2fdb123bf87a846594'}\n\n```{.r .cell-code}\nlibrary(janitor)\n\ncr %>%\n  tabyl(zone)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         zone  n    percent\n         Bale 30 0.07407407\n   Bench Maji 45 0.11111111\n        Gedio 45 0.11111111\n  Ilu AbaBora 45 0.11111111\n        Jimma 45 0.11111111\n        Keffa 45 0.11111111\n        Sheka 45 0.11111111\n       Sidama 60 0.14814815\n West Wellega 45 0.11111111\n```\n:::\n\n```{.r .cell-code}\n# Tabela de contigencia: \n\ncr %>%\n  tabyl(zone, cultivar)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         zone Improved Local Mixture\n         Bale        0    14      16\n   Bench Maji        0    26      19\n        Gedio       15    13      17\n  Ilu AbaBora       14    11      20\n        Jimma        4     6      35\n        Keffa       11     0      34\n        Sheka        6    10      29\n       Sidama       28    17      15\n West Wellega        5    19      21\n```\n:::\n\n```{.r .cell-code}\ncr %>%\n  tabyl(cultivar, shade)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n cultivar Full shade Mid shade Sun\n Improved         83         0   0\n    Local          0         0 116\n  Mixture        127        79   0\n```\n:::\n\n```{.r .cell-code}\n# Separa em duas tabela por região, quando utilizamos 3 variaveis (cultivar, shade, region). \n\ncr %>%\n  tabyl(cultivar, shade, region)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$Oromia\n cultivar Full shade Mid shade Sun\n Improved         23         0   0\n    Local          0         0  50\n  Mixture         58        34   0\n\n$SNNPR\n cultivar Full shade Mid shade Sun\n Improved         60         0   0\n    Local          0         0  66\n  Mixture         69        45   0\n```\n:::\n:::\n\n\n**OBS:** - Para fazer um gráfico com a tabela de contigencia, é melhor usar o `count()` do que o `tabyl()`, porque ela precisa estar em formato longo. - O tabyl é mais interessante para olhar os valores e não para fazer gráfico.\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-13_909b39b7bd6d392ea11b883f64508081'}\n\n```{.r .cell-code}\ncr %>%\n  count(cultivar, shade)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 3\n  cultivar shade          n\n  <chr>    <chr>      <int>\n1 Improved Full shade    83\n2 Local    Sun          116\n3 Mixture  Full shade   127\n4 Mixture  Mid shade     79\n```\n:::\n:::\n\n\n\n### `Arrange()`\n\n-   Faz uma reordenação para fins de visualização\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-14_3d4496ac8eb59e856f4471dbe9c1f2d1'}\n\n```{.r .cell-code}\n# Ordena do menor para o maior:\ncr %>%\n  count(zone, shade) %>% \n  arrange(n)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 25 × 3\n   zone         shade          n\n   <chr>        <chr>      <int>\n 1 Keffa        Mid shade      4\n 2 Sidama       Mid shade      4\n 3 Bale         Mid shade      6\n 4 Jimma        Sun            6\n 5 Gedio        Mid shade      8\n 6 Jimma        Mid shade      8\n 7 West Wellega Mid shade      8\n 8 Bale         Full shade    10\n 9 Sheka        Mid shade     10\n10 Sheka        Sun           10\n# ℹ 15 more rows\n```\n:::\n\n```{.r .cell-code}\n# Ordena por ordem alfabetica: \ncr %>%\n  count(zone, shade) %>% \n  arrange(shade)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 25 × 3\n   zone         shade          n\n   <chr>        <chr>      <int>\n 1 Bale         Full shade    10\n 2 Gedio        Full shade    24\n 3 Ilu AbaBora  Full shade    22\n 4 Jimma        Full shade    31\n 5 Keffa        Full shade    41\n 6 Sheka        Full shade    25\n 7 Sidama       Full shade    39\n 8 West Wellega Full shade    18\n 9 Bale         Mid shade      6\n10 Bench Maji   Mid shade     19\n# ℹ 15 more rows\n```\n:::\n:::\n\n\n# Exemplo com aplicação e visualização gráfica das funções e verbos do **dplyr**\n\n### Importa os dados\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-15_dd3e3a2f7e7791bec5d897385e7e632d'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ncr <- read_csv(\"https://raw.githubusercontent.com/emdelponte/paper-coffee-rust-Ethiopia/master/data/survey_clean.csv\")\nglimpse(cr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 405\nColumns: 13\n$ farm            <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…\n$ region          <chr> \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", …\n$ zone            <chr> \"Bench Maji\", \"Bench Maji\", \"Bench Maji\", \"Bench Maji\"…\n$ district        <chr> \"Debub Bench\", \"Debub Bench\", \"Debub Bench\", \"Debub Be…\n$ lon             <dbl> 35.44250, 35.44250, 35.42861, 35.42861, 35.42861, 35.3…\n$ lat             <dbl> 6.904722, 6.904722, 6.904444, 6.904444, 6.904444, 6.90…\n$ altitude        <dbl> 1100, 1342, 1434, 1100, 1400, 1342, 1432, 1100, 1400, …\n$ cultivar        <chr> \"Local\", \"Mixture\", \"Mixture\", \"Local\", \"Local\", \"Mixt…\n$ shade           <chr> \"Sun\", \"Mid shade\", \"Mid shade\", \"Sun\", \"Sun\", \"Mid sh…\n$ cropping_system <chr> \"Plantation\", \"Plantation\", \"Plantation\", \"Plantation\"…\n$ farm_management <chr> \"Unmanaged\", \"Minimal\", \"Minimal\", \"Unmanaged\", \"Unman…\n$ inc             <dbl> 86.70805, 51.34354, 43.20000, 76.70805, 47.15808, 51.3…\n$ sev2            <dbl> 55.57986, 17.90349, 8.25120, 46.10154, 12.25167, 19.91…\n```\n:::\n:::\n\n\n### Visualização\n\n-   Vamos utilizar a função `ggplot` do pacote **ggplot2** para visualizar os dados do conjunto.\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-16_4aba886d0d71d0fcae1c62433cb4e892'}\n\n```{.r .cell-code}\nlibrary(ggthemes)\ncr %>% \n  ggplot(aes(x= sev2, \n             fill = region)) + \n  geom_histogram() + \n  facet_grid(region ~ cultivar) + \n  scale_fill_manual(values = c(\"red\", \"blue\")) +\n  theme_minimal(base_size = 14) + \n  theme(legend.position = \"bottom\") + \n  labs(y  = \"Frequency\", \n       x = \"Severity (%)\", \n       fill = \"Region\" )\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-17_cbe34dce61cafccb5daaffa90ef3d161'}\n\n```{.r .cell-code}\nglimpse(cr)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 405\nColumns: 13\n$ farm            <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,…\n$ region          <chr> \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", \"SNNPR\", …\n$ zone            <chr> \"Bench Maji\", \"Bench Maji\", \"Bench Maji\", \"Bench Maji\"…\n$ district        <chr> \"Debub Bench\", \"Debub Bench\", \"Debub Bench\", \"Debub Be…\n$ lon             <dbl> 35.44250, 35.44250, 35.42861, 35.42861, 35.42861, 35.3…\n$ lat             <dbl> 6.904722, 6.904722, 6.904444, 6.904444, 6.904444, 6.90…\n$ altitude        <dbl> 1100, 1342, 1434, 1100, 1400, 1342, 1432, 1100, 1400, …\n$ cultivar        <chr> \"Local\", \"Mixture\", \"Mixture\", \"Local\", \"Local\", \"Mixt…\n$ shade           <chr> \"Sun\", \"Mid shade\", \"Mid shade\", \"Sun\", \"Sun\", \"Mid sh…\n$ cropping_system <chr> \"Plantation\", \"Plantation\", \"Plantation\", \"Plantation\"…\n$ farm_management <chr> \"Unmanaged\", \"Minimal\", \"Minimal\", \"Unmanaged\", \"Unman…\n$ inc             <dbl> 86.70805, 51.34354, 43.20000, 76.70805, 47.15808, 51.3…\n$ sev2            <dbl> 55.57986, 17.90349, 8.25120, 46.10154, 12.25167, 19.91…\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggthemes)\n\ncr %>% \n  ggplot(aes(x= sev2, \n             fill = region)) + \n  geom_histogram(color = \"white\") + \n  facet_wrap(region ~ cultivar, ncol = 2) +\n  scale_fill_manual(values = c(\"red\", \"blue\")) +\n  theme_minimal(base_size = 14) + \n  theme(legend.position = \"bottom\") + \n  labs(y  = \"Frequency\", \n       x = \"Severity (%)\", \n       fill = \"Region\" )\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-18_a33b7e88f754f04d02d08b8603f00978'}\n\n```{.r .cell-code}\nsummary(cr$inc)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   9.50   19.43   32.50   34.89   48.20   86.71 \n```\n:::\n\n```{.r .cell-code}\ncr %>% \n  group_by(cultivar) %>% \n  summarize(sev_med= median(sev2), sev_mean = mean(sev2), sev_sd = sd(sev2))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 4\n  cultivar sev_med sev_mean sev_sd\n  <chr>      <dbl>    <dbl>  <dbl>\n1 Improved    1.64     2.16   1.82\n2 Local      17.2     18.7   11.1 \n3 Mixture     5.43     6.47   4.35\n```\n:::\n\n```{.r .cell-code}\ncr %>% \n  ggplot(aes(inc, sev2)) + geom_point()\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n### Seleção e filtro\n\nSeleção de coluna e filtragem de linhas\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-19_fe1dd6dbe65c247bc4409b57b643ae07'}\n\n```{.r .cell-code}\ncr %>%\n  select( farm, region,cultivar, sev2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 405 × 4\n    farm region cultivar  sev2\n   <dbl> <chr>  <chr>    <dbl>\n 1     1 SNNPR  Local    55.6 \n 2     2 SNNPR  Mixture  17.9 \n 3     3 SNNPR  Mixture   8.25\n 4     4 SNNPR  Local    46.1 \n 5     5 SNNPR  Local    12.3 \n 6     6 SNNPR  Mixture  19.9 \n 7     7 SNNPR  Mixture  11.9 \n 8     8 SNNPR  Local    55.6 \n 9     9 SNNPR  Local    11.6 \n10    10 SNNPR  Mixture  11.4 \n# ℹ 395 more rows\n```\n:::\n:::\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-20_16b861cb164771ac578f5466b316093c'}\n\n```{.r .cell-code}\ncr2 <- cr %>%\n  select( farm, region,cultivar, sev2)\n```\n:::\n\n\n### Filtra linhas do meu conjunto\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-21_591eab71b29c4fed34c4231c8c954ae3'}\n\n```{.r .cell-code}\ncr2 <- cr %>% \n  select(farm, region, cultivar, sev2) %>% \n  filter(region == \"Oromia\")\n\ncr2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 165 × 4\n    farm region cultivar  sev2\n   <dbl> <chr>  <chr>    <dbl>\n 1   286 Oromia Mixture   7.63\n 2   287 Oromia Mixture   9.39\n 3   288 Oromia Mixture   1.30\n 4   289 Oromia Mixture   9.79\n 5   290 Oromia Local    18.5 \n 6   291 Oromia Mixture  13.2 \n 7   292 Oromia Mixture   5.60\n 8   293 Oromia Mixture   1.06\n 9   294 Oromia Local    17.6 \n10   295 Oromia Mixture  15.4 \n# ℹ 155 more rows\n```\n:::\n:::\n\n\n### Cria subconjuntos\n\nUtiliza as funções `select()` e `filter()` do pacote **dplyr** para selecionar colunas e linhas, respectivamente.\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-22_f248a059c9a527b7597d83ef92377212'}\n\n```{.r .cell-code}\n#filtra Oromia\ncr_oromia <- cr %>% \n  select(farm, region, cultivar, sev2) %>% \n  filter(region == \"Oromia\")\n\ncr_oromia\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 165 × 4\n    farm region cultivar  sev2\n   <dbl> <chr>  <chr>    <dbl>\n 1   286 Oromia Mixture   7.63\n 2   287 Oromia Mixture   9.39\n 3   288 Oromia Mixture   1.30\n 4   289 Oromia Mixture   9.79\n 5   290 Oromia Local    18.5 \n 6   291 Oromia Mixture  13.2 \n 7   292 Oromia Mixture   5.60\n 8   293 Oromia Mixture   1.06\n 9   294 Oromia Local    17.6 \n10   295 Oromia Mixture  15.4 \n# ℹ 155 more rows\n```\n:::\n\n```{.r .cell-code}\n#filtra SNNPR\ncr_pr <- cr %>% \n select(farm, region, cultivar, sev2) %>% \n  filter(region == \"SNNPR\") \n\ncr_pr\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 240 × 4\n    farm region cultivar  sev2\n   <dbl> <chr>  <chr>    <dbl>\n 1     1 SNNPR  Local    55.6 \n 2     2 SNNPR  Mixture  17.9 \n 3     3 SNNPR  Mixture   8.25\n 4     4 SNNPR  Local    46.1 \n 5     5 SNNPR  Local    12.3 \n 6     6 SNNPR  Mixture  19.9 \n 7     7 SNNPR  Mixture  11.9 \n 8     8 SNNPR  Local    55.6 \n 9     9 SNNPR  Local    11.6 \n10    10 SNNPR  Mixture  11.4 \n# ℹ 230 more rows\n```\n:::\n:::\n\n\n### Visualiza os subconjuntos\n\nGráficos `ggplot` para cada subconjunto\n\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-23_31289972f53471754c3aa9eea91242da'}\n\n```{.r .cell-code}\np1 <- cr_oromia %>% \n  ggplot(aes(cultivar, sev2,\n             fill = cultivar)) + \n  geom_boxplot() +\n  theme_few()+\n  scale_fill_few() +\n  labs(y = \"Severity (%)\") +\n  coord_flip()\n\np2 <- cr_pr %>% \n  ggplot(aes(cultivar, sev2,\n             fill = cultivar)) + \n  geom_boxplot() +\n  theme_few()+\n  scale_fill_few() +\n  labs(y = \"Severity (%)\") +\n  coord_flip()\n\n\n\np1\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n\n```{.r .cell-code}\np2\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-23-2.png){width=672}\n:::\n:::\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-24_c41c0bfaf6c5a9218ce392322a3a753a'}\n\n```{.r .cell-code}\nlibrary(patchwork)\n\n#vamos colocar um gráficos sobre o outro:\n(p1 / p2) + \n  plot_layout(guides = \"collect\",\n              axes = 'collect') +\n  plot_annotation(tag_levels = 'A')\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-25_344aef3a19d5f7539b40baad850e4d48'}\n\n```{.r .cell-code}\np1 <- cr_oromia %>% \n  ggplot(aes(cultivar, sev2,\n             fill = cultivar)) + \n  geom_boxplot() +\n  theme_few()+\n  scale_fill_few() +\n  labs(y = \"Severity (%)\") +\n  coord_flip()\n\np2 <- cr_pr %>% \n  ggplot(aes(cultivar, sev2,\n             fill = cultivar)) + \n  geom_boxplot() +\n  theme_few()+\n  scale_fill_few() +\n  labs(y = \"Severity (%)\") +\n  coord_flip()\n\n\n\np1\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n\n```{.r .cell-code}\np2\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-25-2.png){width=672}\n:::\n:::\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-26_4f5d598aafe72c96cb16c47d16700b54'}\n\n```{.r .cell-code}\nlibrary(patchwork)\n\n# Colcoar título e referencia:\n\n# + ou | coloca um gráfico ao lado do outro. Se coloca / um gráfico fica sobre o outro. \n\n(p1 / p2) + \n  plot_layout(guides = \"collect\",\n              axes = 'collect') +\n  plot_annotation(title = \"Coffe rust in Ethiopia\",\n                  caption = \"source: Del Point (2022)\",\n                  tag_levels = 'A')\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='funcoes_cache/html/unnamed-chunk-27_179ebfe20d60d24325fbd5028a79b246'}\n\n```{.r .cell-code}\n## inserir um histograma no meu gráfico\n\np3 <- cr_oromia %>% \n  ggplot(aes(x= sev2)) + \n  geom_histogram()\n\np1 + inset_element(p3, left = 0.6, bottom = 0.6, right = 1, top = 1)\n```\n\n::: {.cell-output-display}\n![](funcoes_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}